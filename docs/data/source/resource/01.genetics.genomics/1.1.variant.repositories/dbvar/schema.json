{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "dbvar-schema.json",
  "title": "dbVar Structural Variant Record",
  "description": "JSON Schema for dbVar structural variant records from NCBI's database of genomic structural variation.",
  "type": "object",
  "properties": {
    "accession": {
      "type": "string",
      "description": "dbVar accession identifier (nsv for submitted, nssv for supporting, esv for NCBI-curated).",
      "pattern": "^(nsv|nssv|esv)[0-9]+$",
      "examples": ["nsv123456", "esv3456789", "nssv7890123"]
    },
    "variant_call_id": {
      "type": "string",
      "description": "Supporting variant call identifier.",
      "pattern": "^nssv[0-9]+$",
      "examples": ["nssv7890123"]
    },
    "variant_region_id": {
      "type": "string",
      "description": "Submitted variant region identifier.",
      "pattern": "^nsv[0-9]+$",
      "examples": ["nsv123456"]
    },
    "variant_type": {
      "type": "string",
      "description": "Type of structural variant.",
      "enum": ["copy_number_variation", "deletion", "duplication", "insertion", "inversion", "mobile_element_insertion", "novel_sequence_insertion", "tandem_duplication", "translocation", "complex", "sequence_alteration", "copy_number_gain", "copy_number_loss", "alu_insertion", "line1_insertion", "sva_insertion", "herv_insertion"]
    },
    "clinical_assertion": {
      "type": "string",
      "description": "Clinical significance assertion.",
      "enum": ["Pathogenic", "Likely pathogenic", "Uncertain significance", "Likely benign", "Benign", "not provided"]
    },
    "chromosome": {
      "type": "string",
      "description": "Chromosome location.",
      "enum": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "X", "Y", "MT"]
    },
    "outer_start": {
      "type": "integer",
      "description": "Outer start position (1-based).",
      "examples": [1000000]
    },
    "inner_start": {
      "type": "integer",
      "description": "Inner start position (1-based).",
      "examples": [1000050]
    },
    "inner_stop": {
      "type": "integer",
      "description": "Inner stop position (1-based).",
      "examples": [1005000]
    },
    "outer_stop": {
      "type": "integer",
      "description": "Outer stop position (1-based).",
      "examples": [1005050]
    },
    "sv_length": {
      "type": "integer",
      "description": "Length of the structural variant in base pairs.",
      "examples": [5000, 150000, 3000000]
    },
    "assembly": {
      "type": "string",
      "description": "Reference genome assembly.",
      "enum": ["GRCh38", "GRCh37", "NCBI36"]
    },
    "study_accession": {
      "type": "string",
      "description": "Parent study accession.",
      "pattern": "^nstd[0-9]+$",
      "examples": ["nstd102", "nstd166"]
    },
    "study_name": {
      "type": "string",
      "description": "Name of the contributing study.",
      "examples": ["1000 Genomes Phase 3", "gnomAD-SV"]
    },
    "method_type": {
      "type": "string",
      "description": "Detection method used.",
      "enum": ["Sequencing", "Oligo_aCGH", "SNP_array", "BAC_aCGH", "Curated", "Digital_array", "FISH", "Karyotyping", "MLPA", "Optical_mapping", "PCR", "qPCR", "Read_depth", "Read_pair", "SNP_genotyping_analysis", "Split_read", "de_novo_and_local_sequence_assembly"]
    },
    "sample_size": {
      "type": "integer",
      "description": "Number of samples in the study.",
      "examples": [2504, 14891]
    },
    "allele_count": {
      "type": "integer",
      "description": "Number of alleles with this variant.",
      "examples": [1, 50, 1000]
    },
    "allele_frequency": {
      "type": "number",
      "description": "Allele frequency in the study population.",
      "minimum": 0,
      "maximum": 1,
      "examples": [0.001, 0.05]
    },
    "copy_number": {
      "type": "integer",
      "description": "Copy number for CNV variants.",
      "examples": [0, 1, 3, 4]
    },
    "genes": {
      "type": "array",
      "description": "Genes overlapping or near the variant.",
      "items": {
        "type": "object",
        "properties": {
          "symbol": {
            "type": "string",
            "examples": ["BRCA1", "DMD"]
          },
          "gene_id": {
            "type": "integer",
            "examples": [672, 1756]
          },
          "relationship": {
            "type": "string",
            "enum": ["within", "overlaps", "upstream", "downstream"]
          }
        }
      }
    },
    "phenotypes": {
      "type": "array",
      "description": "Associated phenotypes.",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "examples": ["Intellectual disability", "Developmental delay"]
          },
          "medgen_cui": {
            "type": "string",
            "pattern": "^C[0-9]+$",
            "examples": ["C3714756"]
          },
          "hpo_id": {
            "type": "string",
            "pattern": "^HP:[0-9]{7}$",
            "examples": ["HP:0001249"]
          }
        }
      }
    },
    "validation_status": {
      "type": "string",
      "description": "Validation status of the variant.",
      "enum": ["validated", "not validated", "multiple observations"]
    },
    "remapped_from": {
      "type": "string",
      "description": "Original assembly if coordinates were remapped.",
      "enum": ["GRCh37", "NCBI36"]
    },
    "dbvar_build": {
      "type": "integer",
      "description": "dbVar build number.",
      "examples": [155, 156]
    }
  },
  "required": ["accession", "variant_type", "chromosome"],
  "additionalProperties": true
}
