{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "gnomad-schema.json",
  "title": "gnomAD Variant Record",
  "description": "JSON Schema for gnomAD (Genome Aggregation Database) population allele frequency and constraint data.",
  "type": "object",
  "properties": {
    "variant_id": {
      "type": "string",
      "description": "Unique variant identifier (chrom-pos-ref-alt).",
      "pattern": "^[0-9XYM]+-[0-9]+-[ACGT]+-[ACGT]+$",
      "examples": ["11-5227002-T-A", "17-43094433-G-A"]
    },
    "chrom": {
      "type": "string",
      "description": "Chromosome identifier.",
      "enum": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "X", "Y", "M"]
    },
    "pos": {
      "type": "integer",
      "description": "1-based genomic position (GRCh38).",
      "examples": [5227002, 43094433]
    },
    "ref": {
      "type": "string",
      "description": "Reference allele.",
      "pattern": "^[ACGT]+$",
      "examples": ["T", "G", "AG"]
    },
    "alt": {
      "type": "string",
      "description": "Alternate allele.",
      "pattern": "^[ACGT]+$",
      "examples": ["A", "A", "A"]
    },
    "rsids": {
      "type": "array",
      "description": "dbSNP rsIDs.",
      "items": {
        "type": "string",
        "pattern": "^rs[0-9]+$"
      },
      "examples": [["rs334"], ["rs121913279"]]
    },
    "filters": {
      "type": "array",
      "description": "Quality filters applied.",
      "items": {
        "type": "string",
        "enum": ["PASS", "AC0", "AS_VQSR", "InbreedingCoeff", "RF"]
      }
    },
    "AN": {
      "type": "integer",
      "description": "Total number of alleles.",
      "examples": [152312, 31392]
    },
    "AC": {
      "type": "integer",
      "description": "Allele count.",
      "examples": [1, 50, 10000]
    },
    "AF": {
      "type": "number",
      "description": "Global allele frequency.",
      "minimum": 0,
      "maximum": 1,
      "examples": [0.0001, 0.05, 0.001]
    },
    "nhomalt": {
      "type": "integer",
      "description": "Number of homozygous alternate individuals.",
      "examples": [0, 5, 100]
    },
    "AF_afr": {
      "type": "number",
      "description": "Allele frequency in African/African American ancestry.",
      "minimum": 0,
      "maximum": 1
    },
    "AF_amr": {
      "type": "number",
      "description": "Allele frequency in Latino/Admixed American ancestry.",
      "minimum": 0,
      "maximum": 1
    },
    "AF_asj": {
      "type": "number",
      "description": "Allele frequency in Ashkenazi Jewish ancestry.",
      "minimum": 0,
      "maximum": 1
    },
    "AF_eas": {
      "type": "number",
      "description": "Allele frequency in East Asian ancestry.",
      "minimum": 0,
      "maximum": 1
    },
    "AF_fin": {
      "type": "number",
      "description": "Allele frequency in Finnish ancestry.",
      "minimum": 0,
      "maximum": 1
    },
    "AF_mid": {
      "type": "number",
      "description": "Allele frequency in Middle Eastern ancestry.",
      "minimum": 0,
      "maximum": 1
    },
    "AF_nfe": {
      "type": "number",
      "description": "Allele frequency in Non-Finnish European ancestry.",
      "minimum": 0,
      "maximum": 1
    },
    "AF_oth": {
      "type": "number",
      "description": "Allele frequency in Other ancestry.",
      "minimum": 0,
      "maximum": 1
    },
    "AF_sas": {
      "type": "number",
      "description": "Allele frequency in South Asian ancestry.",
      "minimum": 0,
      "maximum": 1
    },
    "AC_afr": { "type": "integer", "description": "Allele count in African ancestry." },
    "AC_amr": { "type": "integer", "description": "Allele count in Latino ancestry." },
    "AC_asj": { "type": "integer", "description": "Allele count in Ashkenazi Jewish ancestry." },
    "AC_eas": { "type": "integer", "description": "Allele count in East Asian ancestry." },
    "AC_fin": { "type": "integer", "description": "Allele count in Finnish ancestry." },
    "AC_mid": { "type": "integer", "description": "Allele count in Middle Eastern ancestry." },
    "AC_nfe": { "type": "integer", "description": "Allele count in Non-Finnish European ancestry." },
    "AC_oth": { "type": "integer", "description": "Allele count in Other ancestry." },
    "AC_sas": { "type": "integer", "description": "Allele count in South Asian ancestry." },
    "AN_afr": { "type": "integer", "description": "Total alleles in African ancestry." },
    "AN_amr": { "type": "integer", "description": "Total alleles in Latino ancestry." },
    "AN_asj": { "type": "integer", "description": "Total alleles in Ashkenazi Jewish ancestry." },
    "AN_eas": { "type": "integer", "description": "Total alleles in East Asian ancestry." },
    "AN_fin": { "type": "integer", "description": "Total alleles in Finnish ancestry." },
    "AN_mid": { "type": "integer", "description": "Total alleles in Middle Eastern ancestry." },
    "AN_nfe": { "type": "integer", "description": "Total alleles in Non-Finnish European ancestry." },
    "AN_oth": { "type": "integer", "description": "Total alleles in Other ancestry." },
    "AN_sas": { "type": "integer", "description": "Total alleles in South Asian ancestry." },
    "AF_popmax": {
      "type": "number",
      "description": "Maximum allele frequency across populations (excluding bottlenecked).",
      "minimum": 0,
      "maximum": 1
    },
    "popmax": {
      "type": "string",
      "description": "Population with maximum allele frequency.",
      "enum": ["afr", "amr", "asj", "eas", "fin", "mid", "nfe", "oth", "sas"]
    },
    "faf95": {
      "type": "number",
      "description": "Filtering allele frequency (95% confidence).",
      "minimum": 0,
      "maximum": 1
    },
    "faf99": {
      "type": "number",
      "description": "Filtering allele frequency (99% confidence).",
      "minimum": 0,
      "maximum": 1
    },
    "vep_annotations": {
      "type": "array",
      "description": "VEP functional annotations.",
      "items": {
        "type": "object",
        "properties": {
          "gene_symbol": { "type": "string" },
          "gene_id": { "type": "string", "pattern": "^ENSG[0-9]{11}$" },
          "transcript_id": { "type": "string", "pattern": "^ENST[0-9]{11}$" },
          "consequence": { "type": "string" },
          "impact": { "type": "string", "enum": ["HIGH", "MODERATE", "LOW", "MODIFIER"] },
          "hgvsc": { "type": "string" },
          "hgvsp": { "type": "string" },
          "lof": { "type": "string", "enum": ["HC", "LC", "OS"] },
          "lof_filter": { "type": "string" },
          "lof_flags": { "type": "string" },
          "canonical": { "type": "boolean" }
        }
      }
    },
    "gene_constraint": {
      "type": "object",
      "description": "Gene-level constraint metrics.",
      "properties": {
        "gene_symbol": { "type": "string" },
        "gene_id": { "type": "string" },
        "pLI": {
          "type": "number",
          "description": "Probability of loss-of-function intolerance.",
          "minimum": 0,
          "maximum": 1
        },
        "pRec": {
          "type": "number",
          "description": "Probability of being recessive.",
          "minimum": 0,
          "maximum": 1
        },
        "pNull": {
          "type": "number",
          "description": "Probability of being tolerant to LoF.",
          "minimum": 0,
          "maximum": 1
        },
        "oe_lof": {
          "type": "number",
          "description": "Observed/Expected ratio for LoF variants."
        },
        "oe_lof_upper": {
          "type": "number",
          "description": "Upper bound of oe_lof confidence interval (LOEUF)."
        },
        "oe_mis": {
          "type": "number",
          "description": "Observed/Expected ratio for missense variants."
        },
        "oe_mis_upper": {
          "type": "number",
          "description": "Upper bound of oe_mis confidence interval."
        },
        "oe_syn": {
          "type": "number",
          "description": "Observed/Expected ratio for synonymous variants."
        },
        "syn_z": {
          "type": "number",
          "description": "Z-score for synonymous constraint."
        },
        "mis_z": {
          "type": "number",
          "description": "Z-score for missense constraint."
        },
        "lof_z": {
          "type": "number",
          "description": "Z-score for LoF constraint."
        }
      }
    },
    "in_silico_predictors": {
      "type": "object",
      "description": "In silico pathogenicity predictions.",
      "properties": {
        "cadd_raw": { "type": "number" },
        "cadd_phred": { "type": "number", "minimum": 0 },
        "revel": { "type": "number", "minimum": 0, "maximum": 1 },
        "splice_ai_max": { "type": "number", "minimum": 0, "maximum": 1 },
        "polyphen": { "type": "string" },
        "sift": { "type": "string" }
      }
    },
    "clinvar": {
      "type": "object",
      "description": "ClinVar annotation if present.",
      "properties": {
        "clinical_significance": { "type": "string" },
        "review_status": { "type": "string" },
        "gold_stars": { "type": "integer", "minimum": 0, "maximum": 4 }
      }
    },
    "gnomad_version": {
      "type": "string",
      "description": "gnomAD data version.",
      "examples": ["4.0", "3.1.2", "2.1.1"]
    },
    "data_type": {
      "type": "string",
      "description": "Data source type.",
      "enum": ["exomes", "genomes", "joint"]
    }
  },
  "required": ["chrom", "pos", "ref", "alt", "AF"],
  "additionalProperties": true
}
