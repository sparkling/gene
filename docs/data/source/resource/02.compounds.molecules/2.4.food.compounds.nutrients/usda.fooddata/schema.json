{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "usda-fooddata-schema.json",
  "title": "USDA FoodData Central Record",
  "description": "JSON Schema for USDA FoodData Central. Contains 380,000+ foods with nutrient profiles: 2,100+ Foundation foods, 7,800+ SR Legacy, 360,000+ Branded foods. Tracks 150+ nutrients with portion data.",
  "type": "object",
  "properties": {
    "fdc_id": {
      "type": "integer",
      "description": "FoodData Central identifier"
    },
    "data_type": {
      "type": "string",
      "description": "Food data type",
      "enum": ["Foundation", "SR Legacy", "Branded", "Survey (FNDDS)", "Experimental"]
    },
    "description": {
      "type": "string",
      "description": "Food description"
    },
    "food_class": {
      "type": "string",
      "description": "Food classification"
    },
    "publication_date": {
      "type": "string",
      "description": "Data publication date",
      "format": "date"
    },
    "scientific_name": {
      "type": "string",
      "description": "Species name if applicable"
    },
    "food_nutrients": {
      "type": "array",
      "description": "Nutrient values",
      "items": {
        "$ref": "#/$defs/foodNutrient"
      }
    },
    "food_portions": {
      "type": "array",
      "description": "Serving sizes",
      "items": {
        "$ref": "#/$defs/foodPortion"
      }
    },
    "branded_food": {
      "$ref": "#/$defs/brandedFood"
    },
    "foundation_food": {
      "$ref": "#/$defs/foundationFood"
    }
  },
  "required": ["fdc_id", "data_type", "description"],
  "$defs": {
    "nutrient": {
      "type": "object",
      "description": "Nutrient definition",
      "properties": {
        "nutrient_id": {
          "type": "integer",
          "description": "Nutrient identifier"
        },
        "name": {
          "type": "string",
          "description": "Nutrient name"
        },
        "unit_name": {
          "type": "string",
          "description": "Unit of measurement",
          "enum": ["g", "mg", "mcg", "kcal", "kJ", "IU"]
        },
        "nutrient_nbr": {
          "type": "string",
          "description": "USDA nutrient number"
        },
        "rank": {
          "type": "integer",
          "description": "Display order"
        }
      },
      "required": ["nutrient_id", "name", "unit_name"]
    },
    "foodNutrient": {
      "type": "object",
      "description": "Nutrient value for food",
      "properties": {
        "nutrient": {
          "$ref": "#/$defs/nutrient"
        },
        "amount": {
          "type": "number",
          "description": "Nutrient amount per 100g"
        },
        "data_points": {
          "type": "integer",
          "description": "Number of samples"
        },
        "min": {
          "type": "number",
          "description": "Minimum value"
        },
        "max": {
          "type": "number",
          "description": "Maximum value"
        },
        "median": {
          "type": "number",
          "description": "Median value"
        },
        "derivation_id": {
          "type": "integer",
          "description": "Calculation method"
        },
        "footnote": {
          "type": "string",
          "description": "Additional notes"
        }
      },
      "required": ["nutrient", "amount"]
    },
    "foodPortion": {
      "type": "object",
      "description": "Serving size",
      "properties": {
        "id": {
          "type": "integer",
          "description": "Portion identifier"
        },
        "amount": {
          "type": "number",
          "description": "Portion amount"
        },
        "portion_description": {
          "type": "string",
          "description": "Serving description"
        },
        "modifier": {
          "type": "string",
          "description": "Additional description"
        },
        "gram_weight": {
          "type": "number",
          "description": "Weight in grams"
        }
      },
      "required": ["gram_weight"]
    },
    "brandedFood": {
      "type": "object",
      "description": "Branded food product",
      "properties": {
        "brand_owner": {
          "type": "string",
          "description": "Brand owner"
        },
        "brand_name": {
          "type": "string",
          "description": "Product brand"
        },
        "gtin_upc": {
          "type": "string",
          "description": "GTIN/UPC barcode"
        },
        "ingredients": {
          "type": "string",
          "description": "Ingredient list"
        },
        "serving_size": {
          "type": "number",
          "description": "Serving size"
        },
        "serving_size_unit": {
          "type": "string",
          "description": "Serving unit"
        },
        "household_serving": {
          "type": "string",
          "description": "Household measure"
        },
        "branded_food_category": {
          "type": "string",
          "description": "Product category"
        }
      }
    },
    "foundationFood": {
      "type": "object",
      "description": "Foundation food data",
      "properties": {
        "ndb_number": {
          "type": "string",
          "description": "Legacy NDB number"
        },
        "footnote": {
          "type": "string",
          "description": "Additional notes"
        }
      }
    }
  },
  "additionalProperties": false
}
