{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://gene.taxonomy/schemas/ebasis",
  "title": "eBASIS Composition Record",
  "description": "JSON Schema for eBASIS bioactive compound composition data",
  "type": "object",
  "properties": {
    "composition_id": {
      "type": "integer",
      "description": "Unique composition record identifier"
    },
    "food": {
      "type": "object",
      "description": "Food item information",
      "properties": {
        "food_id": {"type": "integer"},
        "food_name": {"type": "string"},
        "scientific_name": {"type": ["string", "null"]},
        "food_group": {"type": "string"},
        "food_subgroup": {"type": ["string", "null"]},
        "langual_code": {"type": ["string", "null"]},
        "eurofir_code": {"type": ["string", "null"]},
        "edible_portion_percent": {"type": ["number", "null"]}
      },
      "required": ["food_id", "food_name"]
    },
    "component": {
      "type": "object",
      "description": "Bioactive compound information",
      "properties": {
        "component_id": {"type": "integer"},
        "component_name": {"type": "string"},
        "component_group": {"type": "string"},
        "component_subgroup": {"type": ["string", "null"]},
        "cas_number": {"type": ["string", "null"]},
        "pubchem_cid": {"type": ["integer", "null"]},
        "molecular_formula": {"type": ["string", "null"]},
        "molecular_weight": {"type": ["number", "null"]},
        "inchikey": {"type": ["string", "null"]}
      },
      "required": ["component_id", "component_name", "component_group"]
    },
    "composition_data": {
      "type": "object",
      "description": "Concentration values",
      "properties": {
        "value": {"type": "number"},
        "unit": {"type": "string"},
        "basis": {"type": "string"},
        "value_type": {
          "type": "string",
          "enum": ["mean", "median", "single"]
        },
        "min_value": {"type": ["number", "null"]},
        "max_value": {"type": ["number", "null"]},
        "n_samples": {"type": ["integer", "null"]},
        "std_dev": {"type": ["number", "null"]}
      },
      "required": ["value", "unit"]
    },
    "quality_assessment": {
      "type": "object",
      "description": "EuroFIR data quality scores",
      "properties": {
        "overall_score": {
          "type": "integer",
          "minimum": 1,
          "maximum": 5
        },
        "food_description_score": {"type": "integer"},
        "sampling_plan_score": {"type": "integer"},
        "analytical_method_score": {"type": "integer"},
        "component_id_score": {"type": "integer"}
      }
    },
    "analytical_details": {
      "type": ["object", "null"],
      "description": "Analytical method information",
      "properties": {
        "method": {"type": "string"},
        "method_reference": {"type": ["string", "null"]},
        "detection_limit": {"type": ["number", "null"]},
        "extraction_solvent": {"type": ["string", "null"]}
      }
    },
    "reference": {
      "type": "object",
      "description": "Source literature reference",
      "properties": {
        "reference_id": {"type": "integer"},
        "authors": {"type": "string"},
        "year": {"type": "integer"},
        "title": {"type": "string"},
        "journal": {"type": ["string", "null"]},
        "doi": {"type": ["string", "null"]},
        "pubmed_id": {"type": ["integer", "null"]}
      }
    }
  },
  "required": ["composition_id", "food", "component", "composition_data"],
  "additionalProperties": true
}
